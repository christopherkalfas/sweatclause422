

<div class="container-md shadow-lg rounded"style="background-color:#e9ecef; padding:8px;">
  <h2 class="card-header rounded bg-dark text-light" >
    <%= @group.name %>
  </h2>

  <h6 style="margin:8px;">Commissioner: <em><%=@group.owner.username%></em></h6>


<div >
<table class="table table-striped">
  <thead>
    <th class="card-title">Members</th>
  </thead>

    <% @group.users.each do |user| %>
  <tr class="card-text">
    <% if user.profile_pic.attached?%>
      <td><image src="<%=(url_for(user.profile_pic))%>" class="rounded-circle" style="height: 100px; width: 100px;"><%= user.name %></td>
      <% else %>
      <td><%= user.name %></td>
    <% end %>
  </tr>
      
    <% end %>
  </table>
</div>
<div>
  <table class="table table-striped">
    <thead>
      <th class="card-title">Challenges</th>
    </thead>
    <% @group.challenges.each do |challenge| %>
      <tr class="card-text">
        <td><%= link_to(challenge.name, challenge_path(challenge)) %></td>
      </tr>
    <% end %>
  
  </table>
  </div>

  <div>
  <table class="table table-striped">
    <thead>
      <th class="card-title">Charities</th>
    </thead>
    <% @group.charities.each do |charity| %>
      <tr class="card-text">
        <td><a href=<%= charity.url%>>
          <%= charity.name%>
        </a></td>
      </tr>
    <% end %>
  
  </table>
  </div>


  <% if can? :update, @group %>
    <div id="accordion" style="margin-top: 15px;" >
      <div class="card shadow-lg">
        <div class="card-header rounded bg-dark text-light" id="headingOne">
          <h3 class="mb-0">
            <button class="btn btn-link" style="color:white; text-decoration:none;" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              Commissioner Tools
            </button>
          </h3>
        </div>

    <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
      <div class="card-body">
          
          <h6><%= link_to("Add New Member", edit_group_url(@group)) %></h6>
          <%=link_to("Add New Challenge", new_challenge_url(group_id: @group.id))%>
          <div class="card-footer">
            <h6>Remove Member</h6>  
                <% @group.memberships.each do |membership| %>
                  <div>
                      <%= button_to(membership.user.username, membership, class: "btn btn-danger m-1", method: :delete, data: {confirm: "Are you sure?"}) %>
                  </div>
                <% end%>
            </div>
            <div class="card-text mt-2">
              <%= button_to("Destroy Group", @group, class: "btn btn-warning", method: :delete, data: { confirm: "Are you sure?"}) %>
            </div>
      </div>
    </div>
    </div>
    </div>
  </div>
  <%end%>
</div>
